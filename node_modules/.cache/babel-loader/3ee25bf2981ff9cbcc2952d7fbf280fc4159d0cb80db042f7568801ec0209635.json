{"ast":null,"code":"import{useState,useCallback}from'react';import{apiService}from'../apiService';export const useApi=()=>{const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const callApi=useCallback(async function(apiCall){setLoading(true);setError(null);try{for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}const response=await apiCall(...args);return response.data;// Return the data from axios response\n}catch(err){var _err$response,_err$response$data;const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message||'An unexpected error occurred';setError(errorMessage);throw new Error(errorMessage);}finally{setLoading(false);}},[]);const clearError=()=>setError(null);// Specific API methods\nconst getActiveAnnouncements=()=>callApi(apiService.getActiveAnnouncements);const getActiveSchools=()=>callApi(apiService.getActiveSchools);const getApprovedReviews=()=>callApi(apiService.getApprovedReviews);const submitInquiry=data=>callApi(apiService.submitInquiry,data);const submitReview=data=>callApi(apiService.submitReview,data);return{loading,error,clearError,callApi,getActiveAnnouncements,getActiveSchools,getApprovedReviews,submitInquiry,submitReview};};// Enhanced useReviews hook\nexport const useReviews=()=>{const{loading,error,callApi,clearError}=useApi();const getReviews=()=>callApi(apiService.getReviews);const getApprovedReviews=()=>callApi(apiService.getApprovedReviews);const submitReview=reviewData=>callApi(apiService.submitReview,reviewData);const updateReview=(id,reviewData)=>callApi(apiService.updateReview,id,reviewData);const deleteReview=id=>callApi(apiService.deleteReview,id);return{loading,error,clearError,getReviews,getApprovedReviews,submitReview,updateReview,deleteReview};};// Enhanced useInquiries hook\nexport const useInquiries=()=>{const{loading,error,callApi,clearError}=useApi();const submitInquiry=inquiryData=>callApi(apiService.submitInquiry,inquiryData);const getInquiries=function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;return callApi(apiService.getInquiries,page,limit);};const updateInquiryStatus=(id,status)=>callApi(apiService.updateInquiryStatus,id,status);return{loading,error,clearError,submitInquiry,getInquiries,updateInquiryStatus};};","map":{"version":3,"names":["useState","useCallback","apiService","useApi","loading","setLoading","error","setError","callApi","apiCall","_len","arguments","length","args","Array","_key","response","data","err","_err$response","_err$response$data","errorMessage","message","Error","clearError","getActiveAnnouncements","getActiveSchools","getApprovedReviews","submitInquiry","submitReview","useReviews","getReviews","reviewData","updateReview","id","deleteReview","useInquiries","inquiryData","getInquiries","page","undefined","limit","updateInquiryStatus","status"],"sources":["C:/jbmmsi/client/src/hooks/useApi.js"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { apiService } from '../apiService';\r\n\r\nexport const useApi = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const callApi = useCallback(async (apiCall, ...args) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const response = await apiCall(...args);\r\n      return response.data; // Return the data from axios response\r\n    } catch (err) {\r\n      const errorMessage = err.response?.data?.message || err.message || 'An unexpected error occurred';\r\n      setError(errorMessage);\r\n      throw new Error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const clearError = () => setError(null);\r\n\r\n  // Specific API methods\r\n  const getActiveAnnouncements = () => callApi(apiService.getActiveAnnouncements);\r\n  const getActiveSchools = () => callApi(apiService.getActiveSchools);\r\n  const getApprovedReviews = () => callApi(apiService.getApprovedReviews);\r\n  const submitInquiry = (data) => callApi(apiService.submitInquiry, data);\r\n  const submitReview = (data) => callApi(apiService.submitReview, data);\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    clearError,\r\n    callApi,\r\n    getActiveAnnouncements,\r\n    getActiveSchools,\r\n    getApprovedReviews,\r\n    submitInquiry,\r\n    submitReview\r\n  };\r\n};\r\n\r\n// Enhanced useReviews hook\r\nexport const useReviews = () => {\r\n  const { loading, error, callApi, clearError } = useApi();\r\n\r\n  const getReviews = () => callApi(apiService.getReviews);\r\n  const getApprovedReviews = () => callApi(apiService.getApprovedReviews);\r\n  const submitReview = (reviewData) => callApi(apiService.submitReview, reviewData);\r\n  const updateReview = (id, reviewData) => callApi(apiService.updateReview, id, reviewData);\r\n  const deleteReview = (id) => callApi(apiService.deleteReview, id);\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    clearError,\r\n    getReviews,\r\n    getApprovedReviews,\r\n    submitReview,\r\n    updateReview,\r\n    deleteReview\r\n  };\r\n};\r\n\r\n// Enhanced useInquiries hook\r\nexport const useInquiries = () => {\r\n  const { loading, error, callApi, clearError } = useApi();\r\n\r\n  const submitInquiry = (inquiryData) => callApi(apiService.submitInquiry, inquiryData);\r\n  const getInquiries = (page = 1, limit = 10) => callApi(apiService.getInquiries, page, limit);\r\n  const updateInquiryStatus = (id, status) => callApi(apiService.updateInquiryStatus, id, status);\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    clearError,\r\n    submitInquiry,\r\n    getInquiries,\r\n    updateInquiryStatus\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}