{"ast":null,"code":"import _objectSpread from\"C:/jbmmsi/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useReviews}from'../hooks/useApi';import{useSocket}from'../hooks/useSocket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reviews=()=>{const[reviews,setReviews]=useState([]);const[isModalOpen,setIsModalOpen]=useState(false);const[newReview,setNewReview]=useState({name:'',rating:5,comment:''});const modalRef=useRef(null);const{loading,error,getApprovedReviews,submitReview,clearError}=useReviews();const{socketService,isConnected}=useSocket();const pendingReviewsRef=useRef(new Set());// Track pending review IDs\n// Load reviews and setup WebSocket\nuseEffect(()=>{loadReviews();setupWebSocket();return()=>{socketService.off('review_created');socketService.off('review_updated');socketService.off('review_deleted');};},[]);const loadReviews=async()=>{try{const response=await getApprovedReviews();if(response.success){setReviews(response.data.reviews);}}catch(err){console.error('Failed to load reviews:',err);}};const setupWebSocket=()=>{socketService.joinReviews();socketService.onReviewCreated(newReview=>{console.log('ðŸ“¨ New review received via WebSocket:',newReview);setReviews(prev=>{// Check for duplicates by ID\nconst isDuplicate=prev.some(review=>review._id===newReview._id||review._id.startsWith('temp-')&&review.name===newReview.name&&review.comment===newReview.comment&&Math.abs(new Date(review.createdAt)-new Date(newReview.createdAt))<5000);if(isDuplicate){console.log('ðŸ”„ Duplicate review detected, replacing optimistic update');// Replace optimistic review with real one\nreturn prev.map(review=>review._id.startsWith('temp-')&&review.name===newReview.name&&review.comment===newReview.comment?newReview:review);}// Add new review from other users\nconsole.log('âž• Adding new review from other user');return[newReview,...prev];});// Remove from pending if it was our review\npendingReviewsRef.current.forEach(tempId=>{if(tempId.startsWith('temp-')){pendingReviewsRef.current.delete(tempId);}});});socketService.onReviewUpdated(updatedReview=>{console.log('ðŸ“ Review updated via WebSocket:',updatedReview);setReviews(prev=>prev.map(review=>review._id===updatedReview._id?updatedReview:review));});socketService.onReviewDeleted(data=>{console.log('ðŸ—‘ï¸ Review deleted via WebSocket:',data);setReviews(prev=>prev.filter(review=>review._id!==data.id));});};// Submit new review to server\n// In your Reviews component, update the submit function:\nconst handleSubmit=async e=>{e.preventDefault();try{clearError();const reviewToSubmit=_objectSpread(_objectSpread({},newReview),{},{date:new Date().toISOString().split('T')[0]});// Submit to server\nconst response=await submitReview(reviewToSubmit);// Check if response indicates success\nif(response&&response.success){console.log('Review submitted successfully!',response);// Clear form and close modal\nsetNewReview({name:'',rating:5,comment:''});setIsModalOpen(false);// Reload reviews to get the latest\nloadReviews();}else{throw new Error((response===null||response===void 0?void 0:response.message)||'Failed to submit review');}}catch(err){console.error('Error submitting review:',err);// Error is already set by the useApi hook\n}};const handleChange=e=>{setNewReview(_objectSpread(_objectSpread({},newReview),{},{[e.target.name]:e.target.value}));};const openModal=()=>{setIsModalOpen(true);};const closeModal=()=>{setIsModalOpen(false);setNewReview({name:'',rating:5,comment:''});clearError();};// Handle escape key to close modal\nuseEffect(()=>{const handleEscape=e=>{if(e.keyCode===27)closeModal();};if(isModalOpen){document.addEventListener('keydown',handleEscape);document.body.style.overflow='hidden';}return()=>{document.removeEventListener('keydown',handleEscape);document.body.style.overflow='unset';};},[isModalOpen]);const averageRating=reviews.length>0?(reviews.reduce((sum,review)=>sum+review.rating,0)/reviews.length).toFixed(1):'0.0';return/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"section-title\",children:[\"School \",/*#__PURE__*/_jsx(\"span\",{children:\"Reviews\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"add-review-section\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"add-review-btn\",onClick:openModal,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\"Write a Review\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal \".concat(isModalOpen?'active':''),onClick:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),ref:modalRef,role:\"dialog\",\"aria-modal\":\"true\",\"aria-labelledby\":\"review-modal-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:closeModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"modal-title\",id:\"review-modal-title\",children:\"Add Your Review\"}),/*#__PURE__*/_jsx(\"p\",{className:\"modal-subtitle\",children:\"Share your experience with the school\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message active\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle\"}),error]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"review-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"review-name\",children:\"Your Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-icon\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user input-icon\"}),/*#__PURE__*/_jsx(\"input\",{id:\"review-name\",type:\"text\",name:\"name\",value:newReview.name,onChange:handleChange,required:true,placeholder:\"Enter your name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"review-rating\",children:\"Rating\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-icon\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star input-icon\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"review-rating\",name:\"rating\",value:newReview.rating,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5 Stars - Excellent\"}),/*#__PURE__*/_jsx(\"option\",{value:4,children:\"4 Stars - Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"3 Stars - Good\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2 Stars - Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1 Star - Poor\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"review-comment\",children:\"Your Review\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-icon\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment input-icon\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"review-comment\",name:\"comment\",value:newReview.comment,onChange:handleChange,required:true,rows:4,placeholder:\"Share your thoughts about the school...          \\r minimum of 10 letters\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane\"}),loading?'Submitting...':'Submit Review']})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviews-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"What People Are Saying (\",reviews.length,\")\"]})}),reviews.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-reviews\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comments\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No reviews yet. Be the first to share your experience!\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"reviews-grid\",children:reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:\"review-item \".concat(review._id.startsWith('temp-')?'review-pending':''),children:[review._id.startsWith('temp-')&&/*#__PURE__*/_jsxs(\"div\",{className:\"review-pending-indicator\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync fa-spin\"}),\"Publishing...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"review-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviewer-name\",children:review.name}),/*#__PURE__*/_jsx(\"div\",{className:\"review-date\",children:review.date?new Date(review.date).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'}):'Recently'})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-rating\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stars\",children:['â˜…'.repeat(review.rating),'â˜†'.repeat(5-review.rating)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"rating-text\",children:[\"(\",review.rating,\"/5)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"review-comment\",children:review.comment})]},review._id))})]})]});};export default Reviews;","map":{"version":3,"names":["React","useState","useEffect","useRef","useReviews","useSocket","jsx","_jsx","jsxs","_jsxs","Reviews","reviews","setReviews","isModalOpen","setIsModalOpen","newReview","setNewReview","name","rating","comment","modalRef","loading","error","getApprovedReviews","submitReview","clearError","socketService","isConnected","pendingReviewsRef","Set","loadReviews","setupWebSocket","off","response","success","data","err","console","joinReviews","onReviewCreated","log","prev","isDuplicate","some","review","_id","startsWith","Math","abs","Date","createdAt","map","current","forEach","tempId","delete","onReviewUpdated","updatedReview","onReviewDeleted","filter","id","handleSubmit","e","preventDefault","reviewToSubmit","_objectSpread","date","toISOString","split","Error","message","handleChange","target","value","openModal","closeModal","handleEscape","keyCode","document","addEventListener","body","style","overflow","removeEventListener","averageRating","length","reduce","sum","toFixed","className","children","onClick","concat","stopPropagation","ref","role","onSubmit","htmlFor","type","onChange","required","placeholder","rows","disabled","toLocaleDateString","year","month","day","repeat"],"sources":["C:/jbmmsi/client/src/components/Reviews.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useReviews } from '../hooks/useApi';\r\nimport { useSocket } from '../hooks/useSocket';\r\n\r\nconst Reviews = () => {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [newReview, setNewReview] = useState({\r\n    name: '',\r\n    rating: 5,\r\n    comment: ''\r\n  });\r\n\r\n  const modalRef = useRef(null);\r\n  const { loading, error, getApprovedReviews, submitReview, clearError } = useReviews();\r\n  const { socketService, isConnected } = useSocket();\r\n  const pendingReviewsRef = useRef(new Set()); // Track pending review IDs\r\n\r\n  // Load reviews and setup WebSocket\r\n  useEffect(() => {\r\n    loadReviews();\r\n    setupWebSocket();\r\n\r\n    return () => {\r\n      socketService.off('review_created');\r\n      socketService.off('review_updated');\r\n      socketService.off('review_deleted');\r\n    };\r\n  }, []);\r\n\r\n  const loadReviews = async () => {\r\n    try {\r\n      const response = await getApprovedReviews();\r\n      if (response.success) {\r\n        setReviews(response.data.reviews);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load reviews:', err);\r\n    }\r\n  };\r\n\r\n  const setupWebSocket = () => {\r\n    socketService.joinReviews();\r\n\r\n    socketService.onReviewCreated((newReview) => {\r\n      console.log('ðŸ“¨ New review received via WebSocket:', newReview);\r\n      \r\n      setReviews(prev => {\r\n        // Check for duplicates by ID\r\n        const isDuplicate = prev.some(review => \r\n          review._id === newReview._id || \r\n          (review._id.startsWith('temp-') && \r\n           review.name === newReview.name && \r\n           review.comment === newReview.comment &&\r\n           Math.abs(new Date(review.createdAt) - new Date(newReview.createdAt)) < 5000)\r\n        );\r\n        \r\n        if (isDuplicate) {\r\n          console.log('ðŸ”„ Duplicate review detected, replacing optimistic update');\r\n          // Replace optimistic review with real one\r\n          return prev.map(review => \r\n            (review._id.startsWith('temp-') && \r\n             review.name === newReview.name && \r\n             review.comment === newReview.comment) ? newReview : review\r\n          );\r\n        }\r\n        \r\n        // Add new review from other users\r\n        console.log('âž• Adding new review from other user');\r\n        return [newReview, ...prev];\r\n      });\r\n      \r\n      // Remove from pending if it was our review\r\n      pendingReviewsRef.current.forEach(tempId => {\r\n        if (tempId.startsWith('temp-')) {\r\n          pendingReviewsRef.current.delete(tempId);\r\n        }\r\n      });\r\n    });\r\n\r\n    socketService.onReviewUpdated((updatedReview) => {\r\n      console.log('ðŸ“ Review updated via WebSocket:', updatedReview);\r\n      setReviews(prev => prev.map(review => \r\n        review._id === updatedReview._id ? updatedReview : review\r\n      ));\r\n    });\r\n\r\n    socketService.onReviewDeleted((data) => {\r\n      console.log('ðŸ—‘ï¸ Review deleted via WebSocket:', data);\r\n      setReviews(prev => prev.filter(review => review._id !== data.id));\r\n    });\r\n  };\r\n\r\n  // Submit new review to server\r\n// In your Reviews component, update the submit function:\r\nconst handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  try {\r\n    clearError();\r\n    \r\n    const reviewToSubmit = {\r\n      ...newReview,\r\n      date: new Date().toISOString().split('T')[0]\r\n    };\r\n    \r\n    // Submit to server\r\n    const response = await submitReview(reviewToSubmit);\r\n    \r\n    // Check if response indicates success\r\n    if (response && response.success) {\r\n      console.log('Review submitted successfully!', response);\r\n      \r\n      // Clear form and close modal\r\n      setNewReview({ name: '', rating: 5, comment: '' });\r\n      setIsModalOpen(false);\r\n      \r\n      // Reload reviews to get the latest\r\n      loadReviews();\r\n    } else {\r\n      throw new Error(response?.message || 'Failed to submit review');\r\n    }\r\n  } catch (err) {\r\n    console.error('Error submitting review:', err);\r\n    // Error is already set by the useApi hook\r\n  }\r\n};\r\n\r\n  const handleChange = (e) => {\r\n    setNewReview({\r\n      ...newReview,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const openModal = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setNewReview({ name: '', rating: 5, comment: '' });\r\n    clearError();\r\n  };\r\n\r\n  // Handle escape key to close modal\r\n  useEffect(() => {\r\n    const handleEscape = (e) => {\r\n      if (e.keyCode === 27) closeModal();\r\n    };\r\n\r\n    if (isModalOpen) {\r\n      document.addEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isModalOpen]);\r\n\r\n  const averageRating = reviews.length > 0 \r\n    ? (reviews.reduce((sum, review) => sum + review.rating, 0) / reviews.length).toFixed(1)\r\n    : '0.0';\r\n\r\n  return (\r\n    <div className=\"reviews-container\">\r\n      <h2 className=\"section-title\">School <span>Reviews</span></h2>\r\n      \r\n      {/* Add Review Button */}\r\n      <div className=\"add-review-section\">\r\n        <button className=\"add-review-btn\" onClick={openModal}>\r\n          <i className=\"fas fa-edit\"></i>\r\n          Write a Review\r\n        </button>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      <div className={`modal ${isModalOpen ? 'active' : ''}`} onClick={closeModal}>\r\n        <div \r\n          className=\"modal-content\" \r\n          onClick={(e) => e.stopPropagation()}\r\n          ref={modalRef}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"review-modal-title\"\r\n        >\r\n          <span className=\"close\" onClick={closeModal}>Ã—</span>\r\n          \r\n          <div className=\"modal-icon\">\r\n            <i className=\"fas fa-star\"></i>\r\n          </div>\r\n          \r\n          <h2 className=\"modal-title\" id=\"review-modal-title\">Add Your Review</h2>\r\n          <p className=\"modal-subtitle\">Share your experience with the school</p>\r\n          \r\n          {error && (\r\n            <div className=\"error-message active\">\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n              {error}\r\n            </div>\r\n          )}\r\n          \r\n          <form onSubmit={handleSubmit} className=\"review-form\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"review-name\">Your Name</label>\r\n              <div className=\"input-with-icon\">\r\n                <i className=\"fas fa-user input-icon\"></i>\r\n                <input\r\n                  id=\"review-name\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={newReview.name}\r\n                  onChange={handleChange}\r\n                  required\r\n                  placeholder=\"Enter your name\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"review-rating\">Rating</label>\r\n              <div className=\"input-with-icon\">\r\n                <i className=\"fas fa-star input-icon\"></i>\r\n                <select\r\n                  id=\"review-rating\"\r\n                  name=\"rating\"\r\n                  value={newReview.rating}\r\n                  onChange={handleChange}\r\n                >\r\n                  <option value={5}>5 Stars - Excellent</option>\r\n                  <option value={4}>4 Stars - Very Good</option>\r\n                  <option value={3}>3 Stars - Good</option>\r\n                  <option value={2}>2 Stars - Fair</option>\r\n                  <option value={1}>1 Star - Poor</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"review-comment\">Your Review</label>\r\n              <div className=\"input-with-icon\">\r\n                <i className=\"fas fa-comment input-icon\"></i>\r\n                <textarea\r\n                  id=\"review-comment\"\r\n                  name=\"comment\"\r\n                  value={newReview.comment}\r\n                  onChange={handleChange}\r\n                  required\r\n                  rows={4}\r\n                  placeholder=\"Share your thoughts about the school...          \r\n                  minimum of 10 letters\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <button \r\n              type=\"submit\" \r\n              className=\"submit-btn\"\r\n              disabled={loading}\r\n            >\r\n              <i className=\"fas fa-paper-plane\"></i>\r\n              {loading ? 'Submitting...' : 'Submit Review'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reviews List */}\r\n      <div className=\"reviews-list\">\r\n        <div className=\"reviews-header\">\r\n          <h3>What People Are Saying ({reviews.length})</h3>\r\n        </div>\r\n        \r\n        {reviews.length === 0 ? (\r\n          <div className=\"no-reviews\">\r\n            <i className=\"fas fa-comments\"></i>\r\n            <p>No reviews yet. Be the first to share your experience!</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"reviews-grid\">\r\n            {reviews.map(review => (\r\n              <div \r\n                key={review._id} \r\n                className={`review-item ${review._id.startsWith('temp-') ? 'review-pending' : ''}`}\r\n              >\r\n                {review._id.startsWith('temp-') && (\r\n                  <div className=\"review-pending-indicator\">\r\n                    <i className=\"fas fa-sync fa-spin\"></i>\r\n                    Publishing...\r\n                  </div>\r\n                )}\r\n                <div className=\"review-header\">\r\n                  <div className=\"reviewer-info\">\r\n                    <div className=\"reviewer-name\">{review.name}</div>\r\n                    <div className=\"review-date\">\r\n                      {review.date ? new Date(review.date).toLocaleDateString('en-US', {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: 'numeric'\r\n                      }) : 'Recently'}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"review-rating\">\r\n                  <span className=\"stars\">\r\n                    {'â˜…'.repeat(review.rating)}\r\n                    {'â˜†'.repeat(5 - review.rating)}\r\n                  </span>\r\n                  <span className=\"rating-text\">({review.rating}/5)</span>\r\n                </div>\r\n                <div className=\"review-comment\">{review.comment}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reviews;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}