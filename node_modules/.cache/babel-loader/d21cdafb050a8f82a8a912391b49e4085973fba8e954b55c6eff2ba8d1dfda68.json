{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { SOCKET_CONFIG } from '../config';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.isConnected = false;\n    this.listeners = new Map();\n  }\n  connect() {\n    if (this.socket && this.isConnected) {\n      return this.socket;\n    }\n    console.log('ðŸ”Œ Connecting to WebSocket...');\n    this.socket = io(SOCKET_CONFIG.URL, {\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n    this.socket.on('connect', () => {\n      console.log('âœ… Connected to server via WebSocket');\n      this.isConnected = true;\n    });\n    this.socket.on('disconnect', reason => {\n      console.log('âŒ Disconnected from server:', reason);\n      this.isConnected = false;\n    });\n    this.socket.on('connect_error', error => {\n      console.error('âŒ WebSocket connection error:', error);\n      this.isConnected = false;\n    });\n    this.socket.on('connected', data => {\n      console.log('Server connection confirmed:', data.message);\n    });\n    return this.socket;\n  }\n\n  // Join specific rooms\n  joinAnnouncements() {\n    if (this.socket) {\n      this.socket.emit('join_announcements');\n    }\n  }\n  joinSchools() {\n    if (this.socket) {\n      this.socket.emit('join_schools');\n    }\n  }\n  joinReviews() {\n    if (this.socket) {\n      this.socket.emit('join_reviews');\n    }\n  }\n\n  // Event listeners management\n  on(event, callback) {\n    if (this.socket) {\n      this.socket.on(event, callback);\n\n      // Track listeners for cleanup\n      if (!this.listeners.has(event)) {\n        this.listeners.set(event, []);\n      }\n      this.listeners.get(event).push(callback);\n    }\n  }\n  off(event, callback) {\n    if (this.socket) {\n      this.socket.off(event, callback);\n    }\n  }\n\n  // Specific event listeners\n  onAnnouncementCreated(callback) {\n    this.on('announcement_created', callback);\n  }\n  onAnnouncementUpdated(callback) {\n    this.on('announcement_updated', callback);\n  }\n  onAnnouncementDeleted(callback) {\n    this.on('announcement_deleted', callback);\n  }\n  onSchoolCreated(callback) {\n    this.on('school_created', callback);\n  }\n  onSchoolUpdated(callback) {\n    this.on('school_updated', callback);\n  }\n  onSchoolDeleted(callback) {\n    this.on('school_deleted', callback);\n  }\n  onReviewCreated(callback) {\n    this.on('review_created', callback);\n  }\n  onReviewUpdated(callback) {\n    this.on('review_updated', callback);\n  }\n  onReviewDeleted(callback) {\n    this.on('review_deleted', callback);\n  }\n  onInquiryCreated(callback) {\n    this.on('inquiry_created', callback);\n  }\n\n  // Remove all listeners\n  removeAllListeners() {\n    if (this.socket) {\n      this.socket.removeAllListeners();\n    }\n    this.listeners.clear();\n  }\n  disconnect() {\n    if (this.socket) {\n      console.log('ðŸ”Œ Disconnecting WebSocket...');\n      this.removeAllListeners();\n      this.socket.disconnect();\n      this.socket = null;\n      this.isConnected = false;\n    }\n  }\n  getConnectionStatus() {\n    return this.isConnected;\n  }\n}\nexport const socketService = new SocketService();","map":{"version":3,"names":["io","SOCKET_CONFIG","SocketService","constructor","socket","isConnected","listeners","Map","connect","console","log","URL","transports","timeout","on","reason","error","data","message","joinAnnouncements","emit","joinSchools","joinReviews","event","callback","has","set","get","push","off","onAnnouncementCreated","onAnnouncementUpdated","onAnnouncementDeleted","onSchoolCreated","onSchoolUpdated","onSchoolDeleted","onReviewCreated","onReviewUpdated","onReviewDeleted","onInquiryCreated","removeAllListeners","clear","disconnect","getConnectionStatus","socketService"],"sources":["C:/jbmmsi/client/src/services/socketService.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\nimport { SOCKET_CONFIG } from '../config';\r\n\r\nclass SocketService {\r\n  constructor() {\r\n    this.socket = null;\r\n    this.isConnected = false;\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  connect() {\r\n    if (this.socket && this.isConnected) {\r\n      return this.socket;\r\n    }\r\n\r\n    console.log('ðŸ”Œ Connecting to WebSocket...');\r\n    this.socket = io(SOCKET_CONFIG.URL, {\r\n      transports: ['websocket', 'polling'],\r\n      timeout: 10000\r\n    });\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('âœ… Connected to server via WebSocket');\r\n      this.isConnected = true;\r\n    });\r\n\r\n    this.socket.on('disconnect', (reason) => {\r\n      console.log('âŒ Disconnected from server:', reason);\r\n      this.isConnected = false;\r\n    });\r\n\r\n    this.socket.on('connect_error', (error) => {\r\n      console.error('âŒ WebSocket connection error:', error);\r\n      this.isConnected = false;\r\n    });\r\n\r\n    this.socket.on('connected', (data) => {\r\n      console.log('Server connection confirmed:', data.message);\r\n    });\r\n\r\n    return this.socket;\r\n  }\r\n\r\n  // Join specific rooms\r\n  joinAnnouncements() {\r\n    if (this.socket) {\r\n      this.socket.emit('join_announcements');\r\n    }\r\n  }\r\n\r\n  joinSchools() {\r\n    if (this.socket) {\r\n      this.socket.emit('join_schools');\r\n    }\r\n  }\r\n\r\n  joinReviews() {\r\n    if (this.socket) {\r\n      this.socket.emit('join_reviews');\r\n    }\r\n  }\r\n\r\n  // Event listeners management\r\n  on(event, callback) {\r\n    if (this.socket) {\r\n      this.socket.on(event, callback);\r\n      \r\n      // Track listeners for cleanup\r\n      if (!this.listeners.has(event)) {\r\n        this.listeners.set(event, []);\r\n      }\r\n      this.listeners.get(event).push(callback);\r\n    }\r\n  }\r\n\r\n  off(event, callback) {\r\n    if (this.socket) {\r\n      this.socket.off(event, callback);\r\n    }\r\n  }\r\n\r\n  // Specific event listeners\r\n  onAnnouncementCreated(callback) {\r\n    this.on('announcement_created', callback);\r\n  }\r\n\r\n  onAnnouncementUpdated(callback) {\r\n    this.on('announcement_updated', callback);\r\n  }\r\n\r\n  onAnnouncementDeleted(callback) {\r\n    this.on('announcement_deleted', callback);\r\n  }\r\n\r\n  onSchoolCreated(callback) {\r\n    this.on('school_created', callback);\r\n  }\r\n\r\n  onSchoolUpdated(callback) {\r\n    this.on('school_updated', callback);\r\n  }\r\n\r\n  onSchoolDeleted(callback) {\r\n    this.on('school_deleted', callback);\r\n  }\r\n\r\n  onReviewCreated(callback) {\r\n    this.on('review_created', callback);\r\n  }\r\n\r\n  onReviewUpdated(callback) {\r\n    this.on('review_updated', callback);\r\n  }\r\n\r\n  onReviewDeleted(callback) {\r\n    this.on('review_deleted', callback);\r\n  }\r\n\r\n  onInquiryCreated(callback) {\r\n    this.on('inquiry_created', callback);\r\n  }\r\n\r\n  // Remove all listeners\r\n  removeAllListeners() {\r\n    if (this.socket) {\r\n      this.socket.removeAllListeners();\r\n    }\r\n    this.listeners.clear();\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socket) {\r\n      console.log('ðŸ”Œ Disconnecting WebSocket...');\r\n      this.removeAllListeners();\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n      this.isConnected = false;\r\n    }\r\n  }\r\n\r\n  getConnectionStatus() {\r\n    return this.isConnected;\r\n  }\r\n}\r\n\r\nexport const socketService = new SocketService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}